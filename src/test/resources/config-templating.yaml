# =============================================================================
# RESTMonkey Configuration: Templating Features Test
# =============================================================================
#
# Purpose: Tests RESTMonkey's templating engine with various template expressions
# Used by: TemplatingTest.java
#
# Key Features Tested:
# - Template rendering with {{now}}, {{uuid}}, {{random.int()}}
# - Complex nested template structures
# - Template expressions in static endpoint responses
# - Templating with authentication (template-echo endpoint)
# - Multiple template variables in single response
#
# Template Variables Available:
# - {{now}} - Current timestamp in ISO format
# - {{now:format}} - Formatted timestamp (e.g., {{now:yyyy-MM-dd}})
# - {{uuid}} - Random UUID
# - {{random.int(min,max)}} - Random integer in range
# - {{path.param}} - Path parameter value
# - {{query.param}} - Query parameter value
# - {{header.name}} - Request header value
# - {{body.field}} - Request body field (JSON pointer)
#
# Configuration Details:
# - Port 0: Auto-assign free port for test isolation
# - Auth Token: Required for POST /template-echo endpoint
# - Templating: ENABLED - all {{...}} expressions will be processed
# - Hot Reload: DISABLED - no file watching during tests
# - Schema Validation: STRICT - configuration must be valid
# =============================================================================

port: 0
authToken: template-token

features:
  templating: true
  hotReload: false
  schemaValidation: strict

resources:
  - name: events
    idField: eventId
    enableCrud: true
    seed:
      - eventId: e1
        name: Conference
        date: "2024-01-15"
        location: San Francisco

staticEndpoints:
  - path: /time
    method: GET
    status: 200
    response:
      current_time: "{{now}}"
      formatted_time: "{{now:yyyy-MM-dd HH:mm:ss}}"
      
  - path: /random
    method: GET
    status: 200
    response:
      random_number: "{{random.int(1,100)}}"
      random_uuid: "{{uuid}}"
      
  - path: /template-echo
    method: POST
    status: 200
    response:
      received_at: "{{now}}"
      echo: "You sent a POST request to /template-echo"
      
  - path: /complex-template
    method: GET
    status: 200
    response:
      server_info:
        timestamp: "{{now}}"
        random_id: "{{uuid}}"
        port: "{{env.PORT:8080}}"
      data:
        - id: "{{random.int(1,10)}}"
          value: "item-{{random.int(100,999)}}"
