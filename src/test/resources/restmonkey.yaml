# =============================================================================
# RESTMonkey Configuration: Main Test Configuration
# =============================================================================
#
# Purpose: Primary test configuration for comprehensive RESTMonkey testing
# Used by: UsersApiTest.java, AuthenticationTest.java, and other core tests
#
# Key Features Tested:
# - Basic CRUD operations (GET, POST, PUT, DELETE)
# - Bearer token authentication for mutating operations
# - Static endpoints with templating
# - JSON request/response handling
# - Auto-assigned ports for test isolation
#
# Authentication Behavior:
# - GET requests: No authentication required
# - POST/PUT/DELETE requests: Require "Authorization: Bearer test-token"
# - Missing/invalid tokens return 401 with helpful error message
#
# Chaos Engineering (Disabled):
# - artificialLatencyMs: 0 = No artificial delays
# - chaosFailRate: 0.0 = No random failures (0.0-1.0 range)
#
# Configuration Details:
# - Port 0: Auto-assign free port to avoid conflicts
# - Templating: ENABLED - {{now}} expressions processed in responses
# - Hot Reload: DISABLED - no file watching during tests
# - Schema Validation: STRICT - configuration must be perfectly valid
# - Logging: DEBUG level with file output for detailed test visibility
# =============================================================================

port: 0                   # 0 = auto-assign a free port
authToken: test-token     # omit or "" to disable auth
artificialLatencyMs: 0    # no latency by default
chaosFailRate: 0.0        # 0..1 chance of random 500s

logging:
  level: DEBUG            # TRACE, DEBUG, INFO, WARN, ERROR
  httpRequests: true      # log HTTP requests/responses
  enableFileLogging: true # write logs to files
  logDirectory: logs      # directory for log files

features:
  templating: true
  hotReload: false        # enable if you want live reload of config
  schemaValidation: strict
  recordReplay:
    mode: off             # off | record | replay
    file: target/RESTMonkey.recordings.jsonl
    replayOnMiss: fallback

resources:
  - name: users
    idField: id
    enableCrud: true
    seed:
      - id: u1
        name: Ada Lovelace
        email: ada@math.example
      - id: u2
        name: Alan Turing
        email: alan@logic.example

staticEndpoints:
  # Basic health check with templating
  - method: GET
    path: /health
    status: 200
    response:
      status: ok
      time: "{{now}}"
