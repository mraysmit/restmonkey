# =============================================================================
# RESTMonkey Configuration: Multiple Resources Test
# =============================================================================
#
# Purpose: Tests RESTMonkey with multiple resources and selective CRUD enablement
# Used by: YamlConfigurationTest.MultipleResourcesTest
#
# Key Features Tested:
# - Multiple resources with different ID fields
# - Selective CRUD enablement (some resources have CRUD disabled)
# - Rich seed data with relationships between resources
# - Custom static endpoints with various HTTP methods and status codes
# - Authentication required for mutating operations
#
# Resource Configuration:
# - users: CRUD enabled, userId as ID field
# - posts: CRUD enabled, postId as ID field, references users
# - categories: CRUD DISABLED, only seed data available (no routes)
#
# Expected Behavior:
# - /api/users and /api/posts work (CRUD enabled)
# - /api/categories returns 404 (CRUD disabled)
# - Static endpoints work with custom status codes
# - Authentication required for POST/PUT/DELETE operations
#
# Configuration Details:
# - Port 0: Auto-assign free port for test isolation
# - Auth Token: "multi-token" required for mutating operations
# - Templating: ENABLED - {{...}} expressions processed
# - Hot Reload: DISABLED - no file watching
# - Schema Validation: STRICT - configuration must be perfectly valid
# =============================================================================

port: 0
authToken: multi-token

features:
  templating: true
  hotReload: false
  schemaValidation: strict

resources:
  - name: users
    idField: userId
    enableCrud: true
    seed:
      - userId: u1
        name: John Doe
        email: john@example.com
        role: admin
      - userId: u2
        name: Jane Smith
        email: jane@example.com
        role: user

  - name: posts
    idField: postId
    enableCrud: true
    seed:
      - postId: p1
        title: First Post
        content: Hello World
        authorId: u1
      - postId: p2
        title: Second Post
        content: Another post
        authorId: u2

  - name: categories
    idField: id
    enableCrud: false  # No CRUD routes
    seed:
      - id: c1
        name: Technology
      - id: c2
        name: Science

staticEndpoints:
  - path: /info
    method: GET
    status: 200
    response:
      service: RESTMonkey
      resources: ["users", "posts", "categories"]
      timestamp: "{{now}}"
      
  - path: /echo-post
    method: POST
    status: 200
    echoRequest: true
    
  - path: /custom-status
    method: GET
    status: 418
    response:
      message: "I'm a teapot"
